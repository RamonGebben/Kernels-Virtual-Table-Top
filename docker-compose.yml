services:
  app:
    build:
      context: .
      dockerfile: Dockerfile
    ports:
      - '3000:3000'
    environment:
      NEXT_PUBLIC_WS_PORT: '8081'
      # Override if hosting the WebSocket server elsewhere
      # NEXT_PUBLIC_WS_URL: ws://localhost:8081
    volumes:
      - ./maps:/app/maps
    depends_on:
      - websocket

  websocket:
    build:
      context: .
      dockerfile: server/Dockerfile
    ports:
      - '8081:8081'
    environment:
      WS_PORT: '8081'
    volumes:
      - ./maps:/app/maps
